query CurrentPlayer($playerUuid: uuid!) {
  players(where: { uuid: { _eq: $playerUuid } }) {
    id
    uuid
  }
}

mutation HostGame($playerUuid: uuid!) {
  insert_games_one(object: { host: { data: { uuid: $playerUuid } } }) {
    id
    join_code
  }
}

mutation JoinGame($gameId: Int!, $playerUuid: uuid!) {
  insert_players_one(object: { game_id: $gameId, uuid: $playerUuid }) {
    id
  }
}

subscription Game($id: Int!) {
  games_by_pk(id: $id) {
    id
    join_code
    host {
      id
      username
    }
  }
}

query GameByJoinCode($joinCode: String!) {
  games(where: { join_code: { _eq: $joinCode } }) {
    id
    join_code
    host {
      id
      username
    }
  }
}
